# Console Paint App on Python

### Валиуллин Константин Алексеевич, 353504

#### UML диаграмма классов:
![nLTTRjms47xNAOYyL0kl5sWV5qMGD43H0dLHE4LV2eFWIimk4ufSa9JN2ySFQG_G8nIzWL4aRT0MxHNa6vMYHjgHJ0k64YGlNi_F33yEvsVqo3fcN5d8v1DI_LfTLtzLRsv-8fbMpcWfkKcsB7l1rXono6L2I2QPjUGx9fHxlDq65Y7796FgdDabUH9-WVbCI4uBfhmRqug-zBoJXjMQQc](https://github.com/user-attachments/assets/2875498a-1307-4a3a-af47-e6d11f732544)

# Функциональные требования (в виде Use Cases)

## Общее описание участников и случаев использования
- **Акторы:** Пользователь (человек, взаимодействующий с консольным приложением)
- **Система:** ConsolePaint
- **Описание:** Консольное приложение для создания, редактирования и управления графическими фигурами (круги, линии, прямоугольники) на виртуальном холсте размером 80x18. Поддерживает добавление фигур, их удаление, перемещение, изменение символов и заливки, а также сохранение/загрузку в файл и отмену/повтор действий.

## Случаи использования
1. Нарисовать круг
2. Нарисовать линию
3. Нарисовать прямоугольник
4. Удалить фигуру
5. Переместить фигуру
6. Установить заливку фигуры
7. Установить символ фигуры
8. Сохранить в файл
9. Загрузить из файла
10. Отменить действие
11. Повторить отменённое действие
12. Завершить программу
13. Создать замкнутую фигуру из линий с автоматической заливкой

## Описание Use Cases

### Use Case 1: Нарисовать круг
- **Цель:** Добавить круг на холст
- **Акторы:** Пользователь
- **Предусловие:** Программа запущена, отображается меню
- **Основной сценарий:**
  1. Пользователь выбирает пункт меню **1. Нарисовать круг**.
  2. Система запрашивает координату x центра (0-79).
  3. Пользователь вводит целое число x.
  4. Система запрашивает координату y центра (0-17).
  5. Пользователь вводит целое число y.
  6. Система запрашивает радиус (1-9).
  7. Пользователь вводит целое число.
  8. Система запрашивает символ границы (по умолчанию *).
  9. Пользователь вводит один символ или оставляет поле пустым.
  10. Система запрашивает символ заливки (опционально).
  11. Пользователь вводит один символ или оставляет поле пустым.
  12. Система добавляет круг на холст и отображает обновлённый холст с сообщением **"Круг добавлен."**
- **Исключения:**
  - Если x не в диапазоне 0-79, y не в диапазоне 0-17, радиус не в диапазоне 1-9, или символы не являются одним символом (где требуется), система выводит сообщение об ошибке (например, **"Должно быть от 0 до 79."**, **"Радиус должен быть >0, а не {radius}"**, **"Символ должен быть одним символом."**) и возвращается к меню.

### Use Case 2: Нарисовать линию
- **Цель:** Добавить линию на холст
- **Акторы:** Пользователь
- **Предусловие:** Программа запущена, отображается меню
- **Основной сценарий:**
  1. Пользователь выбирает пункт меню **2. Нарисовать линию**.
  2. Система запрашивает координату x1 начальной точки (0-79).
  3. Пользователь вводит целое число x1.
  4. Система запрашивает координату y1 начальной точки (0-17).
  5. Пользователь вводит целое число y1.
  6. Система запрашивает координату x2 конечной точки (0-79).
  7. Пользователь вводит целое число x2.
  8. Система запрашивает координату y2 конечной точки (0-17).
  9. Пользователь вводит целое число y2.
  10. Система запрашивает символ линии (по умолчанию -).
  11. Пользователь вводит один символ или оставляет поле пустым.
  12. Система добавляет линию на холст и отображает обновлённый холст с сообщением **"Линия добавлена."**
- **Исключения:**
  - Если любая координата не в диапазоне (x: 0-79, y: 0-17), или символ линии не является одним символом (и не пустой), система выводит сообщение об ошибке (например, **"Должно быть от 0 до 79."**, **"Символ должен быть одним символом."**) и возвращается к меню.

### Use Case 3: Нарисовать прямоугольник
- **Цель:** Добавить прямоугольник на холст
- **Акторы:** Пользователь
- **Предусловие:** Программа запущена, отображается меню
- **Основной сценарий:**
  1. Пользователь выбирает пункт меню **3. Нарисовать прямоугольник**.
  2. Система запрашивает координату x1 верхнего левого угла (0-79).
  3. Пользователь вводит целое число x1.
  4. Система запрашивает координату y1 верхнего левого угла (0-17).
  5. Пользователь вводит целое число y1.
  6. Система запрашивает координату x2 нижнего правого угла (0-79).
  7. Пользователь вводит целое число x2.
  8. Система запрашивает координату y2 нижнего правого угла (0-17).
  9. Пользователь вводит целое число y2.
  10. Система запрашивает символ границы (по умолчанию *).
  11. Пользователь вводит один символ или оставляет поле пустым.
  12. Система запрашивает символ заливки (опционально).
  13. Пользователь вводит один символ или оставляет поле пустым.
  14. Система добавляет прямоугольник на холст и отображает обновлённый холст с сообщением **"Прямоугольник добавлен."**
- **Исключения:**
  - Если любая координата не в диапазоне (x: 0-79, y: 0-17), или прямоугольник меньше 2x2, или символы не являются одним символом (где требуется), система выводит сообщение об ошибке (например, **"Должно быть от 0 до 79."**, **"Rectangle must be at least 2×2 in size"**, **"Символ должен быть одним символом."**) и возвращается к меню.

### Use Case 4: Удалить фигуру
- **Цель:** Удалить фигуру с холста
- **Акторы:** Пользователь
- **Предусловие:** На холсте есть хотя бы одна фигура, программа запущена
- **Основной сценарий:**
  1. Пользователь выбирает пункт меню **4. Удалить фигуру**.
  2. Система отображает список фигур с их ID.
  3. Система запрашивает ID фигуры для удаления (1-max_id).
  4. Пользователь вводит целое число (ID).
  5. Система удаляет фигуру и отображает обновлённый холст с сообщением **"Фигура {sid} удалена."**
- **Исключения:**
  - Если на холсте нет фигур, система выводит сообщение **"Нет фигур для удаления."** и возвращается к меню.
  - Если ID не в диапазоне (1-max_id) или фигура с таким ID не найдена, система выводит сообщение **"Фигура не найдена."** и возвращается к меню.

### Use Case 5: Переместить фигуру
- **Цель:** Переместить существующую фигуру на новые координаты
- **Акторы:** Пользователь
- **Предусловие:** На холсте есть хотя бы одна фигура, программа запущена
- **Основной сценарий:**
  1. Пользователь выбирает пункт меню **5. Переместить фигуру**.
  2. Система отображает список фигур с их ID.
  3. Система запрашивает ID фигуры для перемещения (1-max_id).
  4. Пользователь вводит целое число (ID).
  5. Система запрашивает сдвиг по горизонтали dx (-79 до 79).
  6. Пользователь вводит целое число dx.
  7. Система запрашивает сдвиг по вертикали dy (-17 до 17).
  8. Пользователь вводит целое число dy.
  9. Система перемещает фигуру и отображает обновлённый холст с сообщением **"Фигура {sid} смещена."**
- **Исключения:**
  - Если на холсте нет фигур, система выводит сообщение **"Нет фигур для перемещения."** и возвращается к меню.
  - Если ID не в диапазоне (1-max_id) или фигура с таким ID не найдена, система выводит сообщение **"Фигура не найдена."** и возвращается к меню.
  - Если dx или dy не в допустимом диапазоне, система выводит сообщение об ошибке (например, **"Должно быть от -79 до 79."**) и возвращается к меню.

### Use Case 6: Установить заливку фигуры
- **Цель:** Установить символ заливки для фигуры (круга или прямоугольника)
- **Акторы:** Пользователь
- **Предусловие:** На холсте есть хотя бы одна фигура, программа запущена
- **Основной сценарий:**
  1. Пользователь выбирает пункт меню **6. Установить заливку**.
  2. Система отображает список фигур с их ID.
  3. Система запрашивает ID фигуры для установки заливки (1-max_id).
  4. Пользователь вводит целое число (ID).
  5. Если фигура поддерживает заливку (круг или прямоугольник), система запрашивает символ заливки.
  6. Пользователь вводит один символ.
  7. Система устанавливает заливку и отображает обновлённый холст с сообщением **"Заливка {sid} обновлена."**
- **Исключения:**
  - Если на холсте нет фигур, система выводит сообщение **"Нет фигур для установки заливки."** и возвращается к меню.
  - Если ID не в диапазоне (1-max_id) или фигура с таким ID не найдена, система выводит сообщение **"Фигура не найдена."** и возвращается к меню.
  - Если выбрана линия (не поддерживает заливку), система выводит сообщение **"Нет заливки."** и возвращается к меню.
  - Если символ заливки не является одним символом, система выводит сообщение **"Введите ровно один символ."** и возвращается к меню.

### Use Case 7: Установить символ фигуры
- **Цель:** Изменить символ границы фигуры
- **Акторы:** Пользователь
- **Предусловие:** На холсте есть хотя бы одна фигура, программа запущена
- **Основной сценарий:**
  1. Пользователь выбирает пункт меню **7. Установить символ фигуры**.
  2. Система отображает список фигур с их ID.
  3. Система запрашивает ID фигуры для установки символа (1-max_id).
  4. Пользователь вводит целое число (ID).
  5. Система запрашивает новый символ.
  6. Пользователь вводит один символ.
  7. Система изменяет символ фигуры и отображает обновлённый холст с сообщением **"Символ {sid} обновлён."**
- **Исключения:**
  - Если на холсте нет фигур, система выводит сообщение **"Нет фигур для установки символа."** и возвращается к меню.
  - Если ID не в диапазоне (1-max_id) или фигура с таким ID не найдена, система выводит сообщение **"Фигура не найдена."** и возвращается к меню.
  - Если новый символ не является одним символом, система выводит сообщение **"Введите ровно один символ."** и возвращается к меню.

### Use Case 8: Сохранить в файл
- **Цель:** Сохранить текущее состояние холста в файл
- **Акторы:** Пользователь
- **Предусловие:** Программа запущена
- **Основной сценарий:**
  1. Пользователь выбирает пункт меню **8. Сохранить**.
  2. Система запрашивает имя файла.
  3. Пользователь вводит имя файла (только буквы и цифры).
  4. Система сохраняет данные фигур в JSON-файл и выводит сообщение **"Сохранено: {fn}.json"**.
- **Исключения:**
  - Если имя файла пустое или содержит недопустимые символы, система выводит сообщение **"Имя: только буквы и цифры."** и возвращается к меню.

### Use Case 9: Загрузить из файла
- **Цель:** Загрузить состояние холста из файла
- **Акторы:** Пользователь
- **Предусловие:** Программа запущена
- **Основной сценарий:**
  1. Пользователь выбирает пункт меню **9. Загрузить**.
  2. Система запрашивает имя файла.
  3. Пользователь вводит имя файла (только буквы и цифры).
  4. Система загружает данные из JSON-файла, восстанавливает фигуры на холсте и отображает обновлённый холст с сообщением **"Загружено: {fn}.json"**.
- **Исключения:**
  - Если имя файла пустое или содержит недопустимые символы, система выводит сообщение **"Имя: только буквы и цифры."** и возвращается к меню.
  - Если файл не найден, система выводит сообщение **"Файл '{filename}' не найден."** и возвращается к меню.
  - Если файл содержит некорректный JSON, система выводит сообщение **"Файл '{filename}' содержит некорректный JSON."** и возвращается к меню.

### Use Case 10: Отменить действие
- **Цель:** Вернуть холст к предыдущему состоянию
- **Акторы:** Пользователь
- **Предусловие:** В истории есть хотя бы одно предыдущее действие, программа запущена
- **Основной сценарий:**
  1. Пользователь выбирает пункт меню **10. Отменить**.
  2. Система восстанавливает предыдущее состояние холста и отображает обновлённый холст с сообщением **"Отмена выполнена."**
- **Исключения:**
  - Если история пуста, система выводит сообщение **"Нечего отменять."** и возвращается к меню.

### Use Case 11: Повторить отменённое действие
- **Цель:** Восстановить отменённое состояние холста
- **Акторы:** Пользователь
- **Предусловие:** Есть хотя бы одно отменённое действие в стеке повтора, программа запущена
- **Основной сценарий:**
  1. Пользователь выбирает пункт меню **11. Повторить**.
  2. Система восстанавливает отменённое состояние из стека повтора и отображает обновлённый холст с сообщением **"Повтор выполнен."**
- **Исключения:**
  - Если стек повтора пуст, система выводит сообщение **"Нечего повторять."** и возвращается к меню.

### Use Case 12: Завершить программу
- **Цель:** Завершить работу программы
- **Акторы:** Пользователь
- **Предусловие:** Программа запущена
- **Основной сценарий:**
  1. Пользователь выбирает пункт меню **0. Выход**.
  2. Система завершает работу программы.
- **Исключения:** Отсутствуют

### Use Case 13: Создать замкнутую фигуру из линий с автоматической заливкой
- **Цель:** Создать замкнутую фигуру из линий и увидеть, как система автоматически заполняет её символом `#`.
- **Акторы:** Пользователь
- **Предусловие:** Программа запущена, отображается меню и пустой холст.
- **Основной сценарий:**
  1. Пользователь выбирает пункт меню **2. Нарисовать линию**.
  2. Система запрашивает координаты начальной и конечной точек линии (например, x1=10, y1=5, x2=20, y2=5).
  3. Пользователь вводит координаты и символ (например, `-`).
  4. Система добавляет линию на холст и отображает обновлённый холст с сообщением **"Линия добавлена."**.
  5. Пользователь повторяет шаги 1-4, чтобы нарисовать дополнительные линии, образующие замкнутый контур:
     - Линия 2: от (20,5) до (20,10)
     - Линия 3: от (20,10) до (10,10)
     - Линия 4: от (10,10) до (10,5)
  6. После завершения замкнутого контура система автоматически заполняет внутреннюю область символом `#` при следующем рендеринге холста.
  7. Пользователь видит холст с нарисованной фигурой и залитой областью.
- **Результат:** Замкнутая фигура из линий отображена на холсте, а внутренняя область заполнена символом `#`.
- **Исключения:**
  - Если линии не образуют замкнутый контур, заливка не применяется.
  - Если координаты выходят за пределы холста, система выводит сообщение об ошибке, и линия не добавляется.

## Примечания
- Все Use Cases начинаются с отображения меню (холст, список фигур, сообщения и сам список опций), и после выполнения действия система возвращается к меню, если не указано иное.
- Вводимые данные проверяются через `InputHandler` с соответствующими ограничениями (например, координаты, радиус, символы).
- Программа работает в бесконечном цикле до явного завершения пользователем (выбор 0).
- Все изменения на холсте отображаются немедленно после выполнения команды через вызов `render_data()` и `display_canvas()`.
- Список фигур отображается автоматически в главном цикле через `display_shapes()`, поэтому он всегда доступен перед выбором действия.
- Автоматическая заливка замкнутых областей символом `#` выполняется при рендеринге холста после добавления или изменения фигур.
