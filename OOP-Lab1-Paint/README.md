# Console Paint App on Python

### Валиуллин Константин Алексеевич, 353504

#### UML диаграмма классов:
![uml](https://github.com/user-attachments/assets/8e0a444d-4a2d-43b2-99df-a8efc7df6e6e)

## Функциональные требования (в виде Use Cases)

#### Общее описание участников и случаев использования:
- **Акторы:** Пользователь (человек, взаимодействующий с консольным приложением)
- **Система:** ConsolePaint
- **Описание:** Консольное приложение для создания, редактирования и управления графическими фигурами на виртуальном холсте размером 80x18.

#### Случаи использования
1. Нарисовать круг  
2. Нарисовать линию  
3. Нарисовать прямоугольник  
4. Удалить фигуру  
5. Переместить фигуру  
6. Установить заливку фигуры  
7. Установить символ фигуры  
8. Сохранить в файл  
9. Загрузить из файла  
10. Отменить действие  
11. Повторить отменённое действие  
12. Завершить программу  

#### Описание Use Cases

##### Use Case 1: Нарисовать круг
- **Цель:** Добавить круг на холст  
- **Акторы:** Пользователь  
- **Предусловие:** Программа запущена, отображается меню  
- **Основной сценарий:**  
  1. Пользователь выбирает пункт меню `1. Нарисовать круг`.  
  2. Система запрашивает координату `x` центра (0-79).  
  3. Пользователь вводит целое число `x`.  
  4. Система запрашивает координату `y` центра (0-17).  
  5. Пользователь вводит целое число `y`.  
  6. Система запрашивает радиус (1-9).  
  7. Пользователь вводит целое число.  
  8. Система запрашивает символ границы (по умолчанию `*`).  
  9. Пользователь вводит один символ или оставляет поле пустым.  
  10. Система запрашивает символ заливки (опционально).  
  11. Пользователь вводит один символ или оставляет поле пустым.  
  12. Система добавляет круг на холст и отображает обновлённый холст с сообщением "Круг успешно добавлен."  
- **Исключения:**  
  - Если `x` не в диапазоне 0-79 или `y` не в диапазоне 0-17, система выводит сообщение об ошибке и возвращается к меню.  
  - Если радиус не в диапазоне 1-9, система выводит сообщение об ошибке и возвращается к меню.  
  - Если символ границы или заливки не является одним символом (и не пустой, где разрешено), система выводит сообщение об ошибке и возвращается к меню.  

##### Use Case 2: Нарисовать линию
- **Цель:** Добавить линию на холст  
- **Акторы:** Пользователь  
- **Предусловие:** Программа запущена, отображается меню  
- **Основной сценарий:**  
  1. Пользователь выбирает пункт меню `2. Нарисовать линию`.  
  2. Система запрашивает координату `x1` начальной точки (0-79).  
  3. Пользователь вводит целое число `x1`.  
  4. Система запрашивает координату `y1` начальной точки (0-17).  
  5. Пользователь вводит целое число `y1`.  
  6. Система запрашивает координату `x2` конечной точки (0-79).  
  7. Пользователь вводит целое число `x2`.  
  8. Система запрашивает координату `y2` конечной точки (0-17).  
  9. Пользователь вводит целое число `y2`.  
  10. Система запрашивает символ линии (по умолчанию `-`).  
  11. Пользователь вводит один символ или оставляет поле пустым.  
  12. Система добавляет линию на холст и отображает обновлённый холст с сообщением "Линия успешно добавлена."  
- **Исключения:**  
  - Если любая координата не в диапазоне (x: 0-79, y: 0-17), система выводит сообщение об ошибке и возвращается к меню.  
  - Если символ линии не является одним символом (и не пустой), система выводит сообщение об ошибке и возвращается к меню.  

##### Use Case 3: Нарисовать прямоугольник
- **Цель:** Добавить прямоугольник на холст  
- **Акторы:** Пользователь  
- **Предусловие:** Программа запущена, отображается меню  
- **Основной сценарий:**  
  1. Пользователь выбирает пункт меню `3. Нарисовать прямоугольник`.  
  2. Система запрашивает координату `x1` верхнего левого угла (0-79).  
  3. Пользователь вводит целое число `x1`.  
  4. Система запрашивает координату `y1` верхнего левого угла (0-17).  
  5. Пользователь вводит целое число `y1`.  
  6. Система запрашивает координату `x2` нижнего правого угла (0-79).  
  7. Пользователь вводит целое число `x2`.  
  8. Система запрашивает координату `y2` нижнего правого угла (0-17).  
  9. Пользователь вводит целое число `y2`.  
  10. Система запрашивает символ границы (по умолчанию `*`).  
  11. Пользователь вводит один символ или оставляет поле пустым.  
  12. Система запрашивает символ заливки (опционально).  
  13. Пользователь вводит один символ или оставляет поле пустым.  
  14. Система добавляет прямоугольник на холст и отображает обновлённый холст с сообщением "Прямоугольник успешно добавлен."  
- **Исключения:**  
  - Если любая координата не в диапазоне (x: 0-79, y: 0-17), система выводит сообщение об ошибке и возвращается к меню.  
  - Если прямоугольник меньше 2x2 (x2-x1 < 1 или y2-y1 < 1), система выводит сообщение об ошибке и возвращается к меню.  
  - Если символ границы или заливки не является одним символом (и не пустой, где разрешено), система выводит сообщение об ошибке и возвращается к меню.  

##### Use Case 4: Удалить фигуру
- **Цель:** Удалить фигуру с холста  
- **Акторы:** Пользователь  
- **Предусловие:** На холсте есть хотя бы одна фигура, программа запущена  
- **Основной сценарий:**  
  1. Пользователь выбирает пункт меню `4. Удалить фигуру`.  
  2. Система отображает список фигур с их ID.  
  3. Система запрашивает ID фигуры для удаления (1-max_id).  
  4. Пользователь вводит целое число (ID).  
  5. Система удаляет фигуру и отображает обновлённый холст с сообщением "Фигура с ID [ID] успешно удалена."  
- **Исключения:**  
  - Если на холсте нет фигур, система выводит сообщение "Ошибка: Нет фигур для удаления." и возвращается к меню.  
  - Если ID не в диапазоне (1-max_id) или фигура с таким ID не найдена, система выводит сообщение "Ошибка: Фигура с таким ID не найдена." и возвращается к меню.  

##### Use Case 5: Переместить фигуру
- **Цель:** Переместить существующую фигуру на новые координаты  
- **Акторы:** Пользователь  
- **Предусловие:** На холсте есть хотя бы одна фигура, программа запущена  
- **Основной сценарий:**  
  1. Пользователь выбирает пункт меню `5. Переместить фигуру`.  
  2. Система отображает список фигур с их ID.  
  3. Система запрашивает ID фигуры для перемещения (1-max_id).  
  4. Пользователь вводит целое число (ID).  
  5. Система запрашивает сдвиг по горизонтали `dx` (-79 до 79).  
  6. Пользователь вводит целое число `dx`.  
  7. Система запрашивает сдвиг по вертикали `dy` (-17 до 17).  
  8. Пользователь вводит целое число `dy`.  
  9. Система перемещает фигуру и отображает обновлённый холст с сообщением "Фигура с ID [ID] успешно перемещена на dx=[dx], dy=[dy]."  
- **Исключения:**  
  - Если на холсте нет фигур, система выводит сообщение "Ошибка: Нет фигур для перемещения." и возвращается к меню.  
  - Если ID не в диапазоне (1-max_id) или фигура с таким ID не найдена, система выводит сообщение "Ошибка: Фигура с таким ID не найдена." и возвращается к меню.  
  - Если `dx` или `dy` не в допустимом диапазоне, система выводит сообщение об ошибке и возвращается к меню.  

##### Use Case 6: Установить заливку фигуры
- **Цель:** Установить символ заливки для фигуры (круга или прямоугольника)  
- **Акторы:** Пользователь  
- **Предусловие:** На холсте есть хотя бы одна фигура, программа запущена  
- **Основной сценарий:**  
  1. Пользователь выбирает пункт меню `6. Установить заливку`.  
  2. Система отображает список фигур с их ID.  
  3. Система запрашивает ID фигуры для установки заливки (1-max_id).  
  4. Пользователь вводит целое число (ID).  
  5. Система запрашивает символ заливки.  
  6. Пользователь вводит один символ.  
  7. Система устанавливает заливку и отображает обновлённый холст с сообщением "Заливка для фигуры с ID [ID] установлена на '[fill_char]'."  
- **Исключения:**  
  - Если на холсте нет фигур, система выводит сообщение "Ошибка: Нет фигур для установки заливки." и возвращается к меню.  
  - Если ID не в диапазоне (1-max_id) или фигура с таким ID не найдена, система выводит сообщение "Ошибка: Фигура с таким ID не найдена." и возвращается к меню.  
  - Если выбрана линия (не поддерживает заливку), система выводит сообщение "Ошибка: Только круги и прямоугольники поддерживают заливку." и возвращается к меню.  
  - Если символ заливки не является одним символом, система выводит сообщение об ошибке и возвращается к меню.  

##### Use Case 7: Установить символ фигуры
- **Цель:** Изменить символ границы фигуры  
- **Акторы:** Пользователь  
- **Предусловие:** На холсте есть хотя бы одна фигура, программа запущена  
- **Основной сценарий:**  
  1. Пользователь выбирает пункт меню `7. Установить символ фигуры`.  
  2. Система отображает список фигур с их ID.  
  3. Система запрашивает ID фигуры для установки символа (1-max_id).  
  4. Пользователь вводит целое число (ID).  
  5. Система запрашивает новый символ.  
  6. Пользователь вводит один символ.  
  7. Система изменяет символ фигуры и отображает обновлённый холст с сообщением "Символ для фигуры с ID [ID] установлен на '[new_char]'."  
- **Исключения:**  
  - Если на холсте нет фигур, система выводит сообщение "Ошибка: Нет фигур для установки символа." и возвращается к меню.  
  - Если ID не в диапазоне (1-max_id) или фигура с таким ID не найдена, система выводит сообщение "Ошибка: Фигура с таким ID не найдена." и возвращается к меню.  
  - Если новый символ не является одним символом, система выводит сообщение об ошибке и возвращается к меню.  

##### Use Case 8: Сохранить в файл
- **Цель:** Сохранить текущее состояние холста в файл  
- **Акторы:** Пользователь  
- **Предусловие:** Программа запущена  
- **Основной сценарий:**  
  1. Пользователь выбирает пункт меню `8. Сохранить`.  
  2. Система запрашивает имя файла.  
  3. Пользователь вводит имя файла (только буквы и цифры).  
  4. Система сохраняет данные фигур в JSON-файл и выводит сообщение "Холст успешно сохранен в [filename].json."  
- **Исключения:**  
  - Если имя файла пустое или содержит недопустимые символы, система выводит сообщение "Ошибка: Имя файла должно быть непустым и содержать только буквы и цифры." и возвращается к меню.  

##### Use Case 9: Загрузить из файла
- **Цель:** Загрузить состояние холста из файла  
- **Акторы:** Пользователь  
- **Предусловие:** Программа запущена  
- **Основной сценарий:**  
  1. Пользователь выбирает пункт меню `9. Загрузить`.  
  2. Система запрашивает имя файла.  
  3. Пользователь вводит имя файла (только буквы и цифры).  
  4. Система загружает данные из JSON-файла, восстанавливает фигуры на холсте и отображает обновлённый холст с сообщением "Холст успешно загружен из [filename].json."  
- **Исключения:**  
  - Если имя файла пустое или содержит недопустимые символы, система выводит сообщение "Ошибка: Имя файла должно быть непустым и содержать только буквы и цифры." и возвращается к меню.  
  - Если файл не найден, система выводит сообщение "Ошибка: Файл '[filename]' не найден." и возвращается к меню.  
  - Если файл содержит некорректный JSON, система выводит сообщение "Ошибка: Файл '[filename]' содержит некорректный JSON." и возвращается к меню.  

##### Use Case 10: Отменить действие
- **Цель:** Вернуть холст к предыдущему состоянию  
- **Акторы:** Пользователь  
- **Предусловие:** В истории есть хотя бы одно предыдущее действие, программа запущена  
- **Основной сценарий:**  
  1. Пользователь выбирает пункт меню `10. Отменить`.  
  2. Система восстанавливает предыдущее состояние холста и отображает обновлённый холст с сообщением "Отмена выполнена успешно."  
- **Исключения:**  
  - Если история пуста, система выводит сообщение "Нечего отменять." и возвращается к меню.  

##### Use Case 11: Повторить отменённое действие
- **Цель:** Восстановить отменённое состояние холста  
- **Акторы:** Пользователь  
- **Предусловие:** Есть хотя бы одно отменённое действие в стеке повтора, программа запущена  
- **Основной сценарий:**  
  1. Пользователь выбирает пункт меню `11. Повторить`.  
  2. Система восстанавливает отменённое состояние из стека повтора и отображает обновлённый холст с сообщением "Повтор выполнен успешно."  
- **Исключения:**  
  - Если стек повтора пуст, система выводит сообщение "Нечего повторять." и возвращается к меню.  

##### Use Case 12: Завершить программу
- **Цель:** Завершить работу программы  
- **Акторы:** Пользователь  
- **Предусловие:** Программа запущена  
- **Основной сценарий:**  
  1. Пользователь выбирает пункт меню `0. Выход`.  
  2. Система завершает работу программы.  
- **Исключения:** Отсутствуют  

#### Примечания
- Все Use Cases начинаются с отображения меню, и после выполнения действия система возвращается к меню, если не указано иное.  
- Вводимые данные проверяются на корректность через `InputHandler`.  
- Программа работает в бесконечном цикле до явного завершения пользователем (выбор `0`).  
- Все изменения на холсте отображаются немедленно после выполнения команды через вызов `render()` и `display_canvas()`.  
- Список фигур отображается автоматически перед каждым выбором в меню через `display_shapes()`.
